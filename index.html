<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>N-Invest • Controle Financeiro</title>

  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Loader enquanto verifica autenticação -->
  <div id="loadingScreen" style="position: fixed; inset: 0; background: #0f172a; display: flex; align-items: center; justify-content: center; z-index: 10000;">
    <div style="text-align: center;">
      <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #6366f1, #4f46e5); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 22px; color: white; margin: 0 auto 16px; animation: float 6s infinite ease-in-out; box-shadow: 0 0 16px rgba(99, 102, 241, 0.3);">
        <i class="fas fa-chart-line"></i>
      </div>
      <p style="color: #94a3b8; font-family: 'Inter', sans-serif; font-size: 13px;">Verificando autenticação...</p>
    </div>
  </div>

  <!-- Fundo animado -->
  <div class="background-animated">
    <div class="particles-container">
      <div class="particle"></div><div class="particle"></div><div class="particle"></div>
      <div class="particle"></div><div class="particle"></div><div class="particle"></div>
      <div class="particle"></div><div class="particle"></div><div class="particle"></div>
      <div class="particle"></div>
    </div>
    <div class="gradient-overlay"></div>
  </div>

  <div class="page" id="appRoot">

    <!-- HEADER -->
    <header class="header">

      <!-- BOTÃO INVESTIMENTOS -->
      <a href="investimentos.html" class="btn-invest" id="investBtn" aria-label="Abrir investimentos">
        <i class="fas fa-coins" aria-hidden="true"></i>
        Investimentos
      </a>

      <div class="logo-container">
        <div class="logo-icon">
          <i class="fas fa-chart-line"></i>
        </div>
        <h1><span class="brand-highlight">N</span>-Invest</h1>
      </div>

      <p class="subtitle">Controle Financeiro Inteligente</p>

      <div class="header-actions">
        <div class="user-info">
          <div class="user-avatar" id="userAvatar">U</div>
          <div class="user-details">
            <span class="user-name" id="userName">Usuário</span>
            <span class="user-email" id="userEmail">email@exemplo.com</span>
          </div>
        </div>

        <button class="btn-logout" id="logoutBtn" type="button">
          <i class="fas fa-sign-out-alt"></i>
          Sair
        </button>
      </div>
    </header>

    <!-- CONTROLES -->
    <section class="controls card">
      <form id="txForm" class="form" novalidate>
        <input type="hidden" id="type" value="income">

        <div class="form-header">
          <h2><i class="fas fa-plus-circle"></i> Nova Transação</h2>
        </div>

        <!-- LINHA DE INPUTS COM BOTÕES CORRIGIDOS -->
        <div class="controls-row controls-row--inputs">
          
          <!-- VALOR -->
          <div class="input-group">
            <label for="amount" class="input-label">Valor</label>
            <div class="input-wrapper">
              <span class="input-prefix">R$</span>
              <input id="amount" inputmode="decimal" required>
            </div>
          </div>

          <!-- BOTÕES ENTRADA/DESPESA (AGORA FIXOS) -->
          <div class="segmented-container">
            <div class="segmented">
              <button type="button" class="seg-btn is-active" data-type="income">
                <i class="fas fa-arrow-up"></i> Entrada
              </button>
              <button type="button" class="seg-btn" data-type="expense">
                <i class="fas fa-arrow-down"></i> Despesa
              </button>
            </div>
          </div>

          <!-- CATEGORIA -->
          <div class="input-group">
            <label for="category" class="input-label">Categoria</label>
            <select id="category" required>
              <option value="" disabled selected>Selecione</option>
              <option>Alimentação</option>
              <option>Transporte</option>
              <option>Habitação e Essenciais</option>
              <option>Saúde</option>
              <option>Educação</option>
              <option>Viagens</option>
              <option>Compras pessoais</option>
              <option>Salário</option>
              <option>Dinheiro Recebido</option>
              <option>Assinaturas</option>
              <option>Lazer</option>
              <option>Internet/Telefone</option>
              <option>Impostos</option>
              <option>Investimentos</option>
              <option>Pets</option>
              <option>Outros</option>
            </select>
          </div>

          <!-- DATA -->
          <div class="input-group">
            <label for="date" class="input-label">Data</label>
            <input id="date" type="date" required>
          </div>
        </div>

        <!-- DESCRIÇÃO -->
        <div class="controls-row">
          <div class="input-group input-group--full">
            <label for="note" class="input-label">Descrição</label>
            <input id="note" placeholder="Ex: Compra no mercado">
          </div>
        </div>

        <!-- BOTÕES DO FORMULÁRIO -->
        <div class="form-actions">
          <button class="btn-primary" type="submit">
            <i class="fas fa-plus"></i> Adicionar
          </button>
          <button class="btn-ghost" type="button" id="clearAll">
            <i class="fas fa-trash"></i> Limpar tudo
          </button>
        </div>

        <p id="formError" class="error"></p>
      </form>

      <!-- RESUMO -->
      <section class="bar-wrap">
        <div class="stats-cards">
          <div class="stat-card stat-card--income">
            <div class="stat-icon"><i class="fas fa-arrow-up"></i></div>
            <div class="stat-content">
              <span class="stat-label">Entradas</span>
              <span class="stat-value" id="labelIncome">R$ 0,00</span>
            </div>
          </div>

          <div class="stat-card stat-card--expense">
            <div class="stat-icon"><i class="fas fa-arrow-down"></i></div>
            <div class="stat-content">
              <span class="stat-label">Saídas</span>
              <span class="stat-value" id="labelExpense">R$ 0,00</span>
            </div>
          </div>

          <div class="stat-card stat-card--balance">
            <div class="stat-icon"><i class="fas fa-balance-scale"></i></div>
            <div class="stat-content">
              <span class="stat-label">Saldo</span>
              <span class="stat-value" id="labelBalance">R$ 0,00</span>
            </div>
          </div>
        </div>

        <div class="cashbar">
          <div class="cashbar-income" id="barIncome"></div>
          <div class="cashbar-expense" id="barExpense"></div>
        </div>
      </section>

      <!-- FILTROS -->
      <div class="filters">
        <div class="filters-header">
          <i class="fas fa-filter"></i> Filtros
        </div>

        <div class="filters-row">
          <div class="input-group">
            <label for="monthFilter">Mês</label>
            <input id="monthFilter" type="month">
          </div>

          <div class="input-group">
            <label for="typeFilter">Tipo</label>
            <select id="typeFilter">
              <option value="">Todos</option>
              <option value="income">Entrada</option>
              <option value="expense">Despesa</option>
            </select>
          </div>

          <div class="input-group">
            <label for="categoryFilter">Categoria</label>
            <select id="categoryFilter">
              <option value="">Todas</option>
              <option>Alimentação</option>
              <option>Transporte</option>
              <option>Habitação e Essenciais</option>
              <option>Saúde</option>
              <option>Educação</option>
              <option>Viagens</option>
              <option>Compras pessoais</option>
              <option>Salário</option>
              <option>Dinheiro Recebido</option>
              <option>Assinaturas</option>
              <option>Lazer</option>
              <option>Internet/Telefone</option>
              <option>Impostos</option>
              <option>Investimentos</option>
              <option>Pets</option>
              <option>Outros</option>
            </select>
          </div>

          <label class="checkbox-group">
            <input type="checkbox" id="onlyExpenses">
            <span class="checkmark"></span>
            Apenas despesas
          </label>
        </div>
      </div>
    </section>

<!-- HISTÓRICO -->
<section class="table-card">
  <div class="table-head">
    <h2><i class="fas fa-history"></i> Histórico de Lançamentos</h2>
    <div class="table-actions">
      <button class="btn-icon" id="exportBtn"><i class="fas fa-download"></i></button>
      <button class="btn-icon" id="printBtn"><i class="fas fa-print"></i></button>
    </div>
  </div>

  <div class="table-wrap">
    <!-- TABELA DESKTOP -->
    <table class="table">
      <thead>
        <tr>
          <th>Data</th>
          <th>Tipo</th>
          <th>Categoria</th>
          <th>Descrição</th>
          <th class="right">Valor</th>
          <th class="right">Ações</th>
        </tr>
      </thead>
      <tbody id="txBody"></tbody>
    </table>

    <!-- CARDS MOBILE (aparece apenas em telas menores) -->
    <div class="mobile-transactions" id="mobileTransactions"></div>

    <div class="empty-state" id="emptyState">
      <i class="fas fa-receipt"></i>
      <p>Nenhuma transação encontrada</p>
      <span>Adicione sua primeira transação</span>
    </div>
  </div>
</section>
    <!-- COFRINHOS -->
    <section class="goals-section card">
      <div class="form-header">
        <h2><i class="fas fa-piggy-bank"></i> Cofrinhos (Metas)</h2>
      </div>

      <form id="goalForm" class="goals-form" novalidate>
        <div class="goal-form-grid">
          <div class="input-group goal-input-full">
            <label for="goalName">Nome da meta</label>
            <input id="goalName" required>
          </div>

          <div class="input-group">
            <label for="goalAmount">Valor alvo</label>
            <div class="input-wrapper">
              <span class="input-prefix">R$</span>
              <input id="goalAmount" inputmode="decimal" required>
            </div>
          </div>

          <div class="input-group">
            <label for="goalDate">Data alvo</label>
            <input id="goalDate" type="date" required>
          </div>

          <div class="input-group">
            <label for="goalSaved">Já tenho</label>
            <div class="input-wrapper">
              <span class="input-prefix">R$</span>
              <input id="goalSaved" inputmode="decimal">
            </div>
          </div>

          <div class="input-group">
            <label for="goalFrequency">Frequência</label>
            <select id="goalFrequency" required>
              <option value="daily">Diária</option>
              <option value="weekly">Semanal</option>
              <option value="monthly">Mensal</option>
            </select>
          </div>
        </div>

        <div class="form-actions">
          <button class="btn-primary" type="submit">
            <i class="fas fa-plus"></i> Adicionar cofrinho
          </button>
          <button class="btn-ghost" type="button" id="clearGoals">
            <i class="fas fa-trash"></i> Limpar
          </button>
        </div>

        <p id="goalError" class="error"></p>
      </form>

      <div class="goals-list" id="goalList"></div>

      <div class="empty-state" id="goalEmpty">
        <i class="fas fa-piggy-bank"></i>
        <p>Nenhum cofrinho criado</p>
        <span>Crie sua primeira meta</span>
      </div>
    </section>

  </div>

  <script type="module" src="index.js"></script>
  
</body>
</html>